!function(){function c(a){return a.replace(/<[^>]*>?/gi,g)}function g(a){return a.match(d)||a.match(e)||a.match(f)?a:""}function h(a){if(""==a)return"";var b=/<\/?\w+[^>]*(\s|$|>)/g,c=a.toLowerCase().match(b),d=(c||[]).length;if(0==d)return a;for(var e,f,h,g="<p><img><br><li><hr>",i=[],j=[],k=!1,l=0;l<d;l++)if(e=c[l].replace(/<\/?(\w+).*/,"$1"),!(i[l]||g.search("<"+e+">")>-1)){if(f=c[l],h=-1,!/^<\//.test(f))for(var m=l+1;m<d;m++)if(!i[m]&&c[m]=="</"+e+">"){h=m;break}h==-1?k=j[l]=!0:i[h]=!0}if(!k)return a;var l=0;return a=a.replace(b,function(a){var b=j[l]?"":a;return l++,b})}var a,b;"object"==typeof exports&&"function"==typeof require?(a=exports,b=require("./Markdown.Converter").Converter):(a=window.Markdown,b=a.Converter),a.getSanitizingConverter=function(){var a=new b;return a.hooks.chain("postConversion",c),a.hooks.chain("postConversion",h),a};var d=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol(?: start="\d+")?|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,e=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,f=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)*[\]$]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}();